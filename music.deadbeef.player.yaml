app-id: music.deadbeef.player
runtime: org.gnome.Platform
runtime-version: '46'
sdk: org.gnome.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.llvm18
command: deadbeef
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --share=network
  - --socket=pulseaudio
  - --own-name=org.mpris.MediaPlayer2.DeaDBeeF
  - --filesystem=xdg-music
  - --filesystem=~/.local/lib64/deadbeef
  - --talk-name=ca.desrt.dconf
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.kde.StatusNotifierWatcher
  - --filesystem=xdg-run/dconf
  - --filesystem=xdg-run/deadbeef:create
  - --filesystem=~/.config/dconf:ro
  - --filesystem=xdg-run/pipewire-0:ro
  - --env=DCONF_USER_CONFIG_DIR=.config/dconf
rename-icon: deadbeef
rename-desktop-file: deadbeef.desktop
cleanup:
  - /include
  - '*.la'
build-options:
  append-path: /usr/lib/sdk/llvm18/bin
  prepend-ld-library-path: /usr/lib/sdk/llvm18/lib

add-extensions:
  music.deadbeef.player.plugin:
    directory: extensions
    add-ld-path: lib
    subdirectories: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.bs2b:
    directory: extensions/bs2b
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.archive_reader:
    directory: extensions/archive_reader
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.copy_info:
    directory: extensions/copy_info
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.discord_presence:
    directory: extensions/discord_presence
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.dr_meter:
    directory: extensions/dr_meter
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.filebrowser:
    directory: extensions/filebrowser
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.gnome_mmkeys:
    directory: extensions/gnome_mmkeys
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.headerbar_GTK3:
    directory: extensions/headerbar_GTK3
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.jack:
    directory: extensions/jack
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.lyricbar:
    directory: extensions/lyricbar
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.mpris:
    directory: extensions/mpris
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.musical_spectrum:
    directory: extensions/musical_spectrum
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.playback_order:
    directory: extensions/playback_order
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.playback_status:
    directory: extensions/playback_status
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.playcount:
    directory: extensions/playcount
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.quick_search:
    directory: extensions/quick_search
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.rating:
    directory: extensions/rating
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.silence_remover:
    directory: extensions/silence_remover
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.soxr:
    directory: extensions/soxr
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.spectogram:
    directory: extensions/spectogram
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.stereo_widener:
    directory: extensions/stereo_widener
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.virtual_bass:
    directory: extensions/virtual_bass
    bundle: true
    no-autodownload: true
    autodelete: true
  music.deadbeef.player.plugin.waveform_seekbar:
    directory: extensions/waveform_seekbar
    bundle: true
    no-autodownload: true
    autodelete: true

modules:
  - shared-modules/intltool/intltool-0.51.json
  - name: intltool

  - gtkmm.json

  - name: libjansson
    buildsystem: cmake
    sources:
      - type: git
        url: https://github.com/akheron/jansson.git
        tag: v2.14

  - name: libopus
    build-options:
      build-args:
        - --share=network
    buildsystem: autotools
    sources:
      - type: git
        url: https://github.com/xiph/opus.git
        tag: v1.5.2

  - name: opusfile
    buildsystem: autotools
    sources:
      - type: git
        url: https://github.com/xiph/opusfile.git
        tag: v0.12

  - name: libopusenc
    buildsystem: autotools
    sources:
      - type: git
        url: https://github.com/xiph/libopusenc.git
        tag: v0.2.1

  - name: opus-tools
    buildsystem: autotools
    sources:
      - type: git
        url: https://github.com/xiph/opus-tools.git
        tag: v0.2

  - name: libfaad2
    buildsystem: autotools
    sources:
      - type: archive
        url: https://sourceforge.net/projects/faac/files/faad2-src/faad2-2.8.0/faad2-2.8.8.tar.gz/download
        dest-filename: faad2-2.8.8.tar.gz
        sha256: 985c3fadb9789d2815e50f4ff714511c79c2710ac27a4aaaf5c0c2662141426d

  - name: libblocksruntime
    buildsystem: autotools
    sources:
      - type: archive
        url: http://cdn-fastly.deb.debian.org/debian/pool/main/libb/libblocksruntime/libblocksruntime_0.4.1.orig.tar.gz
        sha256: 7807e18d7d6cabd90f77c8b8a8ebd472516fa4ed6a02df82e0c33b1c5e112abc

  - name: libdispatch
    buildsystem: cmake
    builddir: true
    build-options:
      env:
        CC: clang
        CXX: clang++
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DBlocksRuntime_INCLUDE_DIR=/app/include
      - -DBlocksRuntime_LIBRARIES=/app/lib/libBlocksRuntime.so
    sources:
      - type: git
        url: https://github.com/apple/swift-corelibs-libdispatch.git
        tag: swift-6.0.3-RELEASE
      - type: patch
        path: libdispatch-patches/avoid-libkqueue.patch
        strip-components: 0
      - type: patch
        path: libdispatch-patches/remove-werror.patch
        strip-components: 0
      - type: patch
        path: libdispatch-patches/system-blocksruntime.patch
        strip-components: 0

  - name: deadbeef
    buildsystem: autotools
    config-opts:
      - --disable-alsa
      - --disable-pulse
      - --disable-oss
      - CC=clang
      - CXX=clang++
    build-options:
      cflags: -DUSE_GTK_NATIVE_FILE_CHOOSER
      env:
        CC: clang
        CXX: clang++
    build-commands:
      - install -D music.deadbeef.player.appdata.xml /app/share/metainfo/music.deadbeef.player.appdata.xml
    post-install:
      - cp icons/32x32/deadbeef.png /app/
    sources:
      - type: git
        url: https://github.com/DeaDBeeF-Player/deadbeef.git
        tag: 1.9.6
      - type: file
        path: music.deadbeef.player.appdata.xml
      - type: file
        path: music.deadbeef.player.desktop
      - type: patch
        path: pluginpatch.patch

  - name: pulse2
    buildsystem: meson
    config-opts:
      - --buildtype=release
    sources:
      - type: git
        url: https://github.com/saivert/ddb_output_pulse2.git
        branch: master
      - type: patch
        path: pulse-icon.patch

  ## Allows mpcenc command to work, but it is currently incorrectly used in 1.9.6
  ## Hopefully fixed in the upcoming 1.10
  - name: libcue
    buildsystem: cmake
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=None
      - -DBUILD_SHARED_LIBS=ON
      - -Wno-dev
    sources:
      - type: git
        url: https://github.com/lipnitsk/libcue.git
        tag: v2.3.0

  - name: libreplaygain
    buildsystem: cmake
    builddir: true
    config-opts:
      - DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://files.musepack.net/source/libreplaygain_r475.tar.gz
        sha256: 8258bf785547ac2cda43bb195e07522f0a3682f55abe97753c974609ec232482

  - name: musepack
    buildsystem: simple
    builddir: true
    sources:
      - type: archive
        url: https://files.musepack.net/source/musepack_src_r475.tar.gz
        sha256: a4b1742f997f83e1056142d556a8c20845ba764b70365ff9ccf2e3f81c427b2b
      - type: patch
        path: musepack-patches/01_am-maintainer-mode.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/02_link-libm.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/03_mpcchap.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/04_link-order.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/05_visibility.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/1001_missing_extern_kw.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/add_subdir-objects.patch
        strip-components: 0
      - type: patch
        path: musepack-patches/musepack-tools-495-incompatible-pointers.patch
        strip-components: 0
    build-commands:
      - autoreconf -fi
      - ./configure --prefix=/app --sysconfdir=/etc --localstatedir=/var --enable-mpcchap
      - make
      - make install

################### EXTENSIONS GOES HERE ###################
  - name: archive_reader
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p /app/extensions
      - install -Dm755 ddb_archive_reader.so /app/extensions/archive_reader/ddb_archive_reader.so
    sources:
      - type: archive
        url: https://master.dl.sourceforge.net/project/deadbeef/plugins/x86_64/ddb_archive_reader-fd8d74c-linux-x86_64.zip
        sha256: eb26a29bf30584ab903ea0a15c6bd7dae52f8de3eca8cbc2cc16e9c1c7f3cbfb

  - name: bs2b
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -std=c99 -fPIC -Wall -I./libbs2b-3.1.0/src -I./deadbeef"
      - install -Dm755 ddb_bs2b.so /app/extensions/bs2b/ddb_bs2b.so
    sources:
      - type: git
        url: https://github.com/DeaDBeeF-Player/bs2b.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: copy_info
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make gtk3 RELEASE=1 DEADBEEF_INC=-I./deadbeef
      - install -Dm755 ddb_copy_info_gtk3.so /app/extensions/copy_info/ddb_copy_info_gtk3.so
    sources:
      - type: git
        url: https://github.com/danpla/ddb_copy_info.git
        tag: v1.1.0
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: discord_presence
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS $(COPT) -fPIC -I discord-rpc/include -I . -Wall -I/run/build/discord_presence/deadbeef"
      - install -Dm755 discord_presence.so /app/extensions/discord_presence/discord_presence.so
    sources:
      - type: git
        url: https://github.com/kuba160/ddb_discord_presence.git
        tag: v1.7
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: dr_meter
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 ddb_dr_meter_gtk3.so /app/extensions/dr_meter/ddb_dr_meter_gtk3.so
      - install -Dm755 ddb_dr_meter.so /app/extensions/dr_meter/ddb_dr_meter.so
      - install -Dm755 libdrmeter.so /app/extensions/dr_meter/lib/libdrmeter.so
    sources:
      - type: archive
        url: https://phoenixnap.dl.sourceforge.net/project/deadbeef/plugins/x86_64/deadbeef-dr-meter-7467d0e-linux-x86_64.zip
        sha256: 359b5b1cef2f72c2392844fa7434bccbbc69b4da3f18b22500619556e3118084

  - name: filebrowser
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 ddb_misc_filebrowser_GTK3.so /app/extensions/filebrowser/ddb_misc_filebrowser_GTK3.so
    sources:
      - type: archive
        url: https://cyfuture.dl.sourceforge.net/project/deadbeef/plugins/x86_64/ddb_filebrowser-17accd5-linux-x86_64.zip?viasf=1
        sha256: 457fb9dc037e2f92b391b3ea24216f765d73402e149b21df2f2a7b92527142cc

  - name: gnome_mmkeys
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make INCLUDES="$(pkg-config --cflags gio-2.0 glib-2.0) -I./deadbeef"
      - install -Dm755 ddb_gnome_mmkeys.so /app/extensions/gnome_mmkeys/ddb_gnome_mmkeys.so
    sources:
      - type: git
        url: https://github.com/zhanghai/deadbeef-gnome-mmkeys.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: headerbar_GTK3
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 ddb_misc_headerbar_GTK3.so /app/extensions/headerbar_GTK3/ddb_misc_headerbar_GTK3.so
    sources:
      - type: archive
        url: https://cyfuture.dl.sourceforge.net/project/deadbeef/plugins/x86_64/ddb_misc_headerbar_GTK3-898543a-linux-x86_64.zip
        sha256: 3102e01c47eda871fd607190735a769efb9c9c5cd1e799ffd2d78461fdfc047e

  - name: jack
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 jack.so /app/extensions/jack/jack.so
    sources:
      - type: archive
        url: https://cyfuture.dl.sourceforge.net/project/deadbeef/plugins/x86_64/jack-62d1e6a-linux-x86_64.zip
        sha256: e450398fff36208c323de93faa228a8d467ae9cf2e597b6abc65a7fc17313816

  - name: lyricbar
    builddir: true
    buildsystem: simple
    build-commands:
      - tar -xf deadbeef-lyricbar-master.tar.gz
      - install -Dm755 ddb_lyricbar_gtk3.so /app/extensions/lyricbar/ddb_lyricbar_gtk3.so
    sources:
      - type: file
        url: https://github.com/AsVHEn/deadbeef-lyricbar/releases/download/v0.4/deadbeef-lyricbar-master.tar.gz
        sha256: 72223caa734fa03f0118b81be203c10cf76e71f766f77907cf323615bd9063a2

  - name: mpris
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 mpris.so /app/extensions/mpris/mpris.so
    sources:
      - type: archive
        url: https://phoenixnap.dl.sourceforge.net/project/deadbeef/plugins/x86_64/mpris-fdfd001-linux-x86_64.zip
        sha256: 4a729908ffc99a9fd0b0b27493eb505eb5b8c809dab2d56578713386e87afd70

  - name: musical_spectrum
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -O2 -fPIC -std=c99 -D_GNU_SOURCE -Wno-deprecated-declarations -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_vis_musical_spectrum_GTK3.so /app/extensions/musical_spectrum/ddb_vis_musical_spectrum_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_musical_spectrum.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: playback_order
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_misc_playback_order_GTK3.so /app/extensions/playback_order/ddb_misc_playback_order_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_playback_order.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: playback_status
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_misc_playback_status_GTK3.so /app/extensions/playback_status/ddb_misc_playback_status_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_playback_status.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: playcount
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INCLUDE_PATH="/run/build/playcount/deadbeef" .
      - make
      - install -Dm755 playcount.so /app/extensions/playcount/playcount.so
    sources:
      - type: git
        url: https://github.com/adwylie/deadbeef-playcount.git
        tag: v2.0
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: quick_search
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -O2 -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_misc_quick_search_GTK3.so /app/extensions/quick_search/ddb_misc_quick_search_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_quick_search.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: rating
    builddir: true
    buildsystem: simple
    build-commands:
      - tar -xf ddb-headers-latest.tar.bz2
      - sh build.sh ./deadbeef/
      - install -Dm755 rating.so /app/extensions/rating/rating.so
    sources:
      - type: git
        url: https://github.com/splushii/deadbeef-rating.git
        tag: 1.2
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: silence_remover
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef/deadbeef" gtk3
      - install -Dm755 gtk3/silence_remover.so /app/extensions/silence_remover/silence_remover.so
    sources:
      - type: git
        url: https://github.com/kpcee/deadbeef-silence_remover.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: soxr
    buildsystem: cmake-ninja
    sources:
      - type: git
        url: https://github.com/chirlu/soxr.git
        tag: 0.1.3
    config-opts:
      - -DCMAKE_INSTALL_PREFIX=/app/extensions/soxr

  - name: deadbeef_soxr
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - gcc -I/usr/include -I./deadbeef -std=c99 -shared -O2 -o ddb_soxr_dsp.so  soxr.c -lsoxr -fPIC -Wall -march=native -I./soxr/src -L/app/extensions/soxr/lib
      - install -Dm755 ddb_soxr_dsp.so /app/extensions/soxr/ddb_soxr_dsp.so
    sources:
      - type: git
        url: https://github.com/silentlexx/deadbeef_soxr.git
        branch: master
      - type: git
        url: https://github.com/chirlu/soxr.git
        tag: 0.1.3
        dest: soxr/
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: spectogram
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_vis_spectrogram_GTK3.so /app/extensions/spectogram/ddb_vis_spectrogram_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_spectrogram.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: stereo_widener
    builddir: true
    buildsystem: simple
    build-commands:
      - install -Dm755 stereo_widener.so /app/extensions/stereo_widener/stereo_widener.so
    sources:
      - type: archive
        url: https://master.dl.sourceforge.net/project/deadbeef/plugins/x86_64/stereo_widener-d3990d7-linux-x86_64.zip?viasf=1
        sha256: fc1786baaa60edfce144760f1db0300e27345c9dd4df4ae5c65b4b69b00fd1db

  - name: virtual_bass
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -std=c99 -fPIC -Wall -Werror -g -I./deadbeef"
      - install -Dm755 virtual_bass.so /app/extensions/virtual_bass/virtual_bass.so
    sources:
      - type: git
        url: https://github.com/alpo/DeaDBeeF-virtual-bass-plugin.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: vu_meter
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_vis_vu_meter_GTK3.so /app/extensions/vu_meter/ddb_vis_vu_meter_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_vu_meter.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289

  - name: waveform_seekbar
    builddir: true
    buildsystem: simple
    build-commands:
      - mkdir -p deadbeef/
      - tar -xf ddb-headers-latest.tar.bz2 -C deadbeef/
      - make CFLAGS="$CFLAGS -Wall -O2 -g -fPIC -std=c99 -D_GNU_SOURCE -I./deadbeef" gtk3
      - install -Dm755 gtk3/ddb_misc_waveform_GTK3.so /app/extensions/waveform_seekbar/ddb_misc_waveform_GTK3.so
    sources:
      - type: git
        url: https://github.com/cboxdoerfer/ddb_waveform_seekbar.git
        branch: master
      - type: file
        url: https://master.dl.sourceforge.net/project/deadbeef/staticdeps/ddb-headers-latest.tar.bz2
        sha256: e86ee7fb8c8347168c769eeb82b6a0ea9aca55d2688a4f79726a63fc7dd04289
